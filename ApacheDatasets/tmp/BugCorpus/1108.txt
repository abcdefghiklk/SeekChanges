zookeep 1108 bug zoo add auth asf jira 3 issu zoo add auth race condit 2940 zookeep 800 zoo add auth return zinvalidst 2941 connect close 2942 zoo state zh 0 2943 return zinvalidst 2944 zookeep init state initi 0 check state 0 throw race condit doio thread slow state connect end return back zkinvalidst problem 0 close state uniniti state case uniniti case 2nd issu bug send auth info check correct auth null bug case auth list send auth null rc send info packet zh auth auth auth fix rc send info packet zh auth auth auth auth null make auth 3rd issu 2965 add auth zh auth authinfo 2966 zoo unlock auth zh 2967 2968 zh state zoo connect state zh state zoo state 2969 return send auth info zh connect send auth info ad unlock send