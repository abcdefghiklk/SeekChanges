zookeep 1154 data inconsist node highest zxid present time leader elect asf jira particip highest zxid call present leader elect particip lower zxid chosen leader replai log higher zxid higher zxid visibl client connect particip particip reproduc problem 1 connect debugg suspend write 2 issu updat leader 3 crash server 4 start leader elect 5 start 6 find updat step 2 visibl inconsist detail analysi code initi condit 1 node ensembl leader 2 epoch 7 3 simplic zxid digit number epoch digit 4 zxid 73 5 node 73 persist log step 1 request zxid 74 issu leader write log crash ensembl write 74 log step 3 restart form quorum leader mincommitlog 71 maxcommitlog 73 epoch 8 zxid 80 request zxid 81 success mincommitlog 71 maxcommitlog 81 step 4 start appli request zxid 74 memori data tree contact registerasfollow 74 zxid 71 74 81 decid send diff send propos 81 problem problem sequenc data tree updat request 74 correct propos 81 receiv trunc 73 code maxcommitlog bump 81 stai 73 case fine