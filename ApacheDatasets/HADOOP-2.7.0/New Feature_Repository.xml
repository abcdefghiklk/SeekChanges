<?xml version="1.0" encoding="UTF-8" standalone="no"?><bugrepository><bug fixdate="2015-02-10 02:43:18" id="11510" opendate="2015-01-26 08:12:58"><buginformation><summary>[HADOOP-11510] Expose truncate API via FileContext - ASF JIRA</summary><description>We also need to expose truncate API via org.apache.hadoop.fs.FileContext.</description></buginformation><fixedFiles><file>gelog.hadoop.hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.viewfs.ViewFs.java</file><file>a.hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.viewfs.ViewFs.java</file><file>a.hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.FileContext.java</file><file>gelog.hadoop.hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.TestAfsCheckPath.java</file><file>a.hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.ChecksumFs.java</file><file>a.hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.DelegateToFileSystem.java</file><file>a.hadoop-hdfs-project.hadoop-hdfs.src.main.java.org.apache.hadoop.fs.Hdfs.java</file><file>a.hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.viewfs.ChRootedFs.java</file><file>a.hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.FilterFs.java</file><file>a.hadoop-hdfs-project.hadoop-hdfs.src.test.java.org.apache.hadoop.fs.TestHDFSFileContextMainOperations.java</file><file>gelog.hadoop.hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.DelegateToFileSystem.java</file><file>a.hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.TestAfsCheckPath.java</file><file>a.hadoop-hdfs-project.hadoop-hdfs.src.test.java.org.apache.hadoop.hdfs.server.namenode.TestFileTruncate.java</file><file>gelog.hadoop.hadoop-hdfs-project.hadoop-hdfs.src.test.java.org.apache.hadoop.fs.TestHDFSFileContextMainOperations.java</file><file>gelog.hadoop.hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.viewfs.ChRootedFs.java</file><file>gelog.hadoop.hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.FileContext.java</file><file>a.hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.AbstractFileSystem.java</file><file>gelog.hadoop.hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.ChecksumFs.java</file><file>gelog.hadoop.hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.AbstractFileSystem.java</file><file>gelog.hadoop.hadoop-hdfs-project.hadoop-hdfs.src.main.java.org.apache.hadoop.fs.Hdfs.java</file><file>gelog.hadoop.hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.FilterFs.java</file></fixedFiles></bug><bug fixdate="2015-01-22 12:05:45" id="11490" opendate="2014-09-12 08:06:37"><buginformation><summary>[HADOOP-11490] Expose truncate API via FileSystem and shell command - ASF JIRA</summary><description>Add truncate operation to FileSystem and expose it to users via shell command.</description></buginformation><fixedFiles><file>gelog.hadoop.hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.HarFileSystem.java</file><file>hadoop-hdfs-project.hadoop-hdfs.src.main.java.org.apache.hadoop.hdfs.DistributedFileSystem.java</file><file>gelog.hadoop.hadoop-hdfs-project.hadoop-hdfs.src.main.java.org.apache.hadoop.hdfs.DistributedFileSystem.java</file><file>hadoop-hdfs-project.hadoop-hdfs.src.test.java.org.apache.hadoop.hdfs.web.TestTokenAspect.java</file><file>hadoop-tools.hadoop-aws.src.main.java.org.apache.hadoop.fs.s3a.S3AFileSystem.java</file><file>gelog.hadoop.hadoop-hdfs-project.hadoop-hdfs.src.test.java.org.apache.hadoop.hdfs.server.namenode.TestFileTruncate.java</file><file>hadoop-tools.hadoop-azure.src.main.java.org.apache.hadoop.fs.azure.NativeAzureFileSystem.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.HarFileSystem.java</file><file>hadoop-tools.hadoop-distcp.src.test.java.org.apache.hadoop.tools.TestDistCpWithAcls.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.TestAclCommands.java</file><file>gelog.hadoop.hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.FilterFileSystem.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.ftp.FTPFileSystem.java</file><file>hadoop-hdfs-project.hadoop-hdfs-httpfs.src.main.java.org.apache.hadoop.fs.http.client.HttpFSFileSystem.java</file><file>hadoop-tools.hadoop-aws.src.main.java.org.apache.hadoop.fs.s3.S3FileSystem.java</file><file>hadoop-tools.hadoop-distcp.src.test.java.org.apache.hadoop.tools.TestDistCpWithXAttrs.java</file><file>hadoop-tools.hadoop-openstack.src.main.java.org.apache.hadoop.fs.swift.snative.SwiftNativeFileSystem.java</file><file>gelog.hadoop.hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.Truncate.java</file><file>gelog.hadoop.hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.FsCommand.java</file><file>hadoop-tools.hadoop-aws.src.main.java.org.apache.hadoop.fs.s3native.NativeS3FileSystem.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.TestFileSystemCanonicalization.java</file><file>gelog.hadoop.hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.FileSystem.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.FileSystem.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.ChecksumFileSystem.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.FilterFileSystem.java</file><file>hadoop-hdfs-project.hadoop-hdfs.src.test.java.org.apache.hadoop.hdfs.server.namenode.TestFileTruncate.java</file><file>gelog.hadoop.hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.ChecksumFileSystem.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.RawLocalFileSystem.java</file><file>gelog.hadoop.hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.RawLocalFileSystem.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.viewfs.ViewFileSystem.java</file><file>hadoop-hdfs-project.hadoop-hdfs.src.main.java.org.apache.hadoop.hdfs.web.WebHdfsFileSystem.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.FsCommand.java</file><file>gelog.hadoop.hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.viewfs.ViewFileSystem.java</file><file>hadoop-tools.hadoop-gridmix.src.main.java.org.apache.hadoop.mapred.gridmix.PseudoLocalFs.java</file></fixedFiles></bug><bug fixdate="2014-12-02 06:00:11" id="11341" opendate="2014-11-26 08:13:28"><buginformation><summary>[HADOOP-11341] KMS support for whitelist key ACLs - ASF JIRA</summary><description>As reported by Dian Fu : Key based ACL in KMS is currently implemented as whitelist. So if I configure as follows in kms-acl.xml, &#13;
 &lt;property&gt;&#13;
    &lt;name&gt;key.acl.testKey.DECRYPT_EEK&lt;/name&gt;&#13;
    &lt;value&gt;testUser&lt;/value&gt;&#13;
  &lt;/property&gt;&#13;
 , then only testUser user can do DECRYPT_EEK call on key testKey. If I want yarn user can also do DECRYPT_EEK call on testKey key, I need add yarn user to the above configuration value manually. This means that if I want to configure key based ACL(DECRYPT_EEK) for some key, I need also add yarn user to configuration DECRYPT_EEK for that key. As I don't know if yarn user will later need to do DECRYPT_EEK for this key.. This is inconvenient and tricky. This can be alleviated by slightly modifying the key ACL logic in KMS first checks if the user, in this case yarn, is present in key.acl.&lt;key-name&gt;.&lt;OP-name&gt; list. And if not, then also check if the user is present in default.key.acl.&lt;OP-name&gt;. If yes, then grant access.. else deny. Currently, default.key.acl.&lt;OP-name&gt; is consulted only if NO key.acl.&lt;key-name&gt;.&lt;OP-name&gt; is specified.</description></buginformation><fixedFiles><file>gelog.hadoop.hadoop-common-project.hadoop-kms.src.test.java.org.apache.hadoop.crypto.key.kms.server.TestKMS.java</file><file>a.hadoop-common-project.hadoop-kms.src.test.java.org.apache.hadoop.crypto.key.kms.server.TestKMS.java</file><file>a.hadoop-common-project.hadoop-kms.src.main.java.org.apache.hadoop.crypto.key.kms.server.KMSACLs.java</file><file>a.hadoop-common-project.hadoop-kms.src.main.java.org.apache.hadoop.crypto.key.kms.server.KMSConfiguration.java</file><file>gelog.hadoop.hadoop-common-project.hadoop-kms.src.main.java.org.apache.hadoop.crypto.key.kms.server.KMSConfiguration.java</file><file>gelog.hadoop.hadoop-common-project.hadoop-kms.src.main.java.org.apache.hadoop.crypto.key.kms.server.KMSACLs.java</file></fixedFiles></bug><bug fixdate="2014-12-18 12:18:38" id="10728" opendate="2014-06-20 02:18:18"><buginformation><summary>[HADOOP-10728] Metrics system for Windows Azure Storage Filesystem - ASF JIRA</summary><description>Add a metrics2 source for the Windows Azure Filesystem driver that was introduced with HADOOP-9629. AzureFileSystemInstrumentation is the new MetricsSource. AzureNativeFilesystemStore and NativeAzureFilesystem have been modified to record statistics and some machinery is added for the accumulation of 'rolling average' statistics. Primary new code appears in org.apache.hadoop.fs.azure.metrics namespace. Credits and history Credit for this work goes to the early team: Min Wei, David Lao, Lengning Liu and Alexander Stojanovic as well as multiple people who have taken over this work since then (hope I don't forget anyone): Dexter Bradshaw, Johannes Klein, Ivan Mitic, Michael Rys, Mostafa Elhemali, Brian Swan, [~mikelid], Xi Fang, and Chuan Liu.</description></buginformation><fixedFiles><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.test.java.org.apache.hadoop.fs.azure.metrics.AzureMetricsTestUtil.java</file><file>hadoop-tools.hadoop-azure.src.main.java.org.apache.hadoop.fs.azure.NativeAzureFileSystem.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.test.java.org.apache.hadoop.fs.azure.metrics.TestBandwidthGaugeUpdater.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.main.java.org.apache.hadoop.fs.azure.metrics.ErrorMetricUpdater.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.main.java.org.apache.hadoop.fs.azure.metrics.AzureFileSystemInstrumentation.java</file><file>hadoop-tools.hadoop-azure.src.test.java.org.apache.hadoop.fs.azure.AzureBlobStorageTestAccount.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.main.java.org.apache.hadoop.fs.azure.metrics.BandwidthGaugeUpdater.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.test.java.org.apache.hadoop.fs.azure.metrics.TestRollingWindowAverage.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.main.java.org.apache.hadoop.fs.azure.NativeFileSystemStore.java</file><file>hadoop-tools.hadoop-azure.src.main.java.org.apache.hadoop.fs.azure.AzureNativeFileSystemStore.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.main.java.org.apache.hadoop.fs.azure.metrics.ResponseReceivedMetricUpdater.java</file><file>hadoop-tools.hadoop-azure.src.main.java.org.apache.hadoop.fs.azure.NativeFileSystemStore.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.main.java.org.apache.hadoop.fs.azure.metrics.AzureFileSystemMetricsSystem.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.main.java.org.apache.hadoop.fs.azure.NativeAzureFileSystem.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.test.java.org.apache.hadoop.fs.azure.metrics.TestAzureFileSystemInstrumentation.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.test.java.org.apache.hadoop.fs.azure.metrics.TestNativeAzureFileSystemMetricsSystem.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.test.java.org.apache.hadoop.fs.azure.TestAzureFileSystemErrorConditions.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.main.java.org.apache.hadoop.fs.azure.AzureNativeFileSystemStore.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.main.java.org.apache.hadoop.fs.azure.metrics.RollingWindowAverage.java</file><file>hadoop-tools.hadoop-azure.src.test.java.org.apache.hadoop.fs.azure.TestAzureFileSystemErrorConditions.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.test.java.org.apache.hadoop.fs.azure.AzureBlobStorageTestAccount.java</file></fixedFiles></bug><bug fixdate="2014-12-18 12:18:09" id="9629" opendate="2013-06-07 04:47:51"><buginformation><summary>[HADOOP-9629] Support Windows Azure Storage - Blob as a file system in Hadoop - ASF JIRA</summary><description>Description This JIRA incorporates adding a new file system implementation for accessing Windows Azure Storage - Blob from within Hadoop, such as using blobs as input to MR jobs or configuring MR jobs to put their output directly into blob storage. High level design At a high level, the code here extends the FileSystem class to provide an implementation for accessing blob storage; the scheme wasb is used for accessing it over HTTP, and wasbs for accessing over HTTPS. We use the URI scheme: wasb[s]://&lt;container&gt;@&lt;account&gt;/path/to/file to address individual blobs. We use the standard Azure Java SDK (com.microsoft.windowsazure) to do most of the work. In order to map a hierarchical file system over the flat name-value pair nature of blob storage, we create a specially tagged blob named path/to/dir whenever we create a directory called path/to/dir, then files under that are stored as normal blobs path/to/dir/file. We have many metrics implemented for it using the Metrics2 interface. Tests are implemented mostly using a mock implementation for the Azure SDK functionality, with an option to test against a real blob storage if configured (instructions provided inside in README.txt). Credits and history This has been ongoing work for a while, and the early version of this work can be seen in HADOOP-8079. This JIRA is a significant revision of that and we'll post the patch here for Hadoop trunk first, then post a patch for branch-1 as well for backporting the functionality if accepted. Credit for this work goes to the early team: Min Wei, David Lao, Lengning Liu and Alexander Stojanovic as well as multiple people who have taken over this work since then (hope I don't forget anyone): Dexter Bradshaw, Johannes Klein, Ivan Mitic, Michael Rys, Mostafa Elhemali, Brian Swan, [~mikelid], Xi Fang, and Chuan Liu. Test Besides unit tests, we have used WASB as the default file system in our service product. (HDFS is also used but not as default file system.) Various different customer and test workloads have been run against clusters with such configurations for quite some time. The current version reflects to the version of the code tested and used in our production environment.</description></buginformation><fixedFiles><file>a.hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.metrics2.lib.DefaultMetricsSystem.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.test.java.org.apache.hadoop.fs.azure.TestNativeAzureFileSystemConcurrency.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.azurenative.StorageInterface.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.azurenative.BlobMaterialization.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.test.java.org.apache.hadoop.fs.azure.TestAzureConcurrentOutOfBandIo.java</file><file>a.hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.metrics2.util.MBeans.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.azurenative.TestNativeAzureFileSystemContractLive.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.main.java.org.apache.hadoop.fs.azure.ShellDecryptionKeyProvider.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.azurenative.Wasb.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.azurenative.MockStorageInterface.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.main.java.org.apache.hadoop.fs.azure.NativeFileSystemStore.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.azurenative.NativeAzureFileSystemBaseTest.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.azurenative.AzureBlobStorageTestAccount.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.azurenative.NativeAzureFileSystem.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.azurenative.TestBlobMetadata.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.test.java.org.apache.hadoop.fs.azure.TestNativeAzureFileSystemOperationsMocked.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.test.java.org.apache.hadoop.fs.azure.TestAzureFileSystemErrorConditions.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.azurenative.AzureMetricsTestUtil.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.azurenative.SelfThrottlingIntercept.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.azurenative.AzureFileSystemInstrumentation.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.main.java.org.apache.hadoop.fs.azure.SimpleKeyProvider.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.test.java.org.apache.hadoop.fs.azure.TestNativeAzureFileSystemMocked.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.azurenative.TestNativeAzureFileSystemLive.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.test.java.org.apache.hadoop.fs.azure.TestBlobDataValidation.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.azurenative.TestShellDecryptionKeyProvider.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.azurenative.TestAzureFileSystemInstrumentation.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.azure.AzureException.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.azurenative.TestAzureConcurrentOutOfBandIo.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.main.java.org.apache.hadoop.fs.azure.KeyProviderException.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.azurenative.AzureFileSystemMetricsSystem.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.azurenative.InMemoryBlockBlobStore.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.azurenative.TestOutOfBandAzureBlobOperations.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.main.java.org.apache.hadoop.fs.azure.PartialListing.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.test.java.org.apache.hadoop.fs.azure.TestContainerChecks.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.test.java.org.apache.hadoop.fs.azure.TestOutOfBandAzureBlobOperations.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.azurenative.KeyProvider.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.azurenative.TestRollingWindowAverage.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.azurenative.TestNativeAzureFileSystemConcurrency.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.main.java.org.apache.hadoop.fs.azure.SelfThrottlingIntercept.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.azurenative.TestNativeAzureFileSystemContractMocked.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.test.java.org.apache.hadoop.fs.azure.TestNativeAzureFileSystemFileNameCheck.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.test.java.org.apache.hadoop.fs.azure.TestWasbUriAndConfiguration.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.test.java.org.apache.hadoop.fs.azure.TestNativeAzureFileSystemLive.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.azurenative.WasbFsck.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.azurenative.FileMetadata.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.main.java.org.apache.hadoop.fs.azure.BlobMaterialization.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.azurenative.TestWasbFsck.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.azurenative.ShellDecryptionKeyProvider.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.azurenative.TestOutOfBandAzureBlobOperationsLive.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.azurenative.ErrorMetricUpdater.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.azurenative.SendRequestIntercept.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.azurenative.SimpleKeyProvider.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.azurenative.ResponseReceivedMetricUpdater.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.main.java.org.apache.hadoop.fs.azure.FileMetadata.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.main.java.org.apache.hadoop.fs.azure.AzureException.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.test.java.org.apache.hadoop.fs.azure.TestNativeAzureFileSystemContractEmulator.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.azurenative.TestNativeAzureFileSystemContractEmulator.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.azurenative.AzureLinkedStack.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.azurenative.TestNativeAzureFileSystemMetricsSystem.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.azurenative.TestNativeAzureFileSystemMocked.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.azure.KeyProviderException.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.test.java.org.apache.hadoop.fs.azure.TestNativeAzureFileSystemBlockLocations.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.main.java.org.apache.hadoop.fs.azure.AzureNativeFileSystemStore.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.main.java.org.apache.hadoop.fs.azure.WasbFsck.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.azurenative.NativeFileSystemStore.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.test.java.org.apache.hadoop.fs.azure.AzureBlobStorageTestAccount.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.azurenative.RollingWindowAverage.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.azurenative.TestContainerChecks.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.test.java.org.apache.hadoop.fs.azure.NativeAzureFileSystemBaseTest.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.test.java.org.apache.hadoop.fs.azure.TestNativeAzureFileSystemContractLive.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.test.java.org.apache.hadoop.fs.azure.InMemoryBlockBlobStore.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.test.java.org.apache.hadoop.fs.azure.TestNativeAzureFileSystemContractMocked.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.main.java.org.apache.hadoop.fs.azure.SendRequestIntercept.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.azurenative.PartialListing.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.test.java.org.apache.hadoop.fs.azure.TestWasbFsck.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.azurenative.BandwidthGaugeUpdater.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.azurenative.StorageInterfaceImpl.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.azurenative.TestAzureFileSystemErrorConditions.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.test.java.org.apache.hadoop.fs.azure.TestOutOfBandAzureBlobOperationsLive.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.azurenative.TestNativeAzureFileSystemBlockLocations.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.azurenative.AzureNativeFileSystemStore.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.azurenative.TestBandwidthGaugeUpdater.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.azurenative.TestNativeAzureFileSystemFileNameCheck.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.test.java.org.apache.hadoop.fs.azure.TestShellDecryptionKeyProvider.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.azurenative.TestNativeAzureFileSystemUploadLogic.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.main.java.org.apache.hadoop.fs.azure.KeyProvider.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.main.java.org.apache.hadoop.fs.azure.StorageInterface.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.main.java.org.apache.hadoop.fs.azure.StorageInterfaceImpl.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.azurenative.TestBlobDataValidation.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.main.java.org.apache.hadoop.fs.azure.NativeAzureFileSystem.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.azurenative.TestWasbUriAndConfiguration.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.azurenative.TestNativeAzureFileSystemOperationsMocked.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.main.java.org.apache.hadoop.fs.azure.Wasb.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.test.java.org.apache.hadoop.fs.azure.MockStorageInterface.java</file><file>gelog.hadoop.hadoop-tools.hadoop-azure.src.test.java.org.apache.hadoop.fs.azure.TestBlobMetadata.java</file></fixedFiles></bug><bug fixdate="2014-11-13 04:22:23" id="8989" opendate="2008-10-14 06:47:07"><buginformation><summary>[HADOOP-8989] hadoop fs -find feature - ASF JIRA</summary><description>Both sysadmins and users make frequent use of the unix 'find' command, but Hadoop has no correlate. Without this, users are writing scripts which make heavy use of hadoop dfs -lsr, and implementing find one-offs. I think hdfs -lsr is somewhat taxing on the NameNode, and a really slow experience on the client side. Possibly an in-NameNode find operation would be only a bit more taxing on the NameNode, but significantly faster from the client's point of view? The minimum set of options I can think of which would make a Hadoop find command generally useful is (in priority order): -type (file or directory, for now) -atime/-ctime-mtime (... and -creationtime?) (both + and - arguments) -print0 (for piping to xargs -0) -depth -owner/-group (and -nouser/-nogroup) -name (allowing for shell pattern, or even regex?) -perm -size One possible special case, but could possibly be really cool if it ran from within the NameNode: -delete The "hadoop dfs -lsr | hadoop dfs -rm" cycle is really, really slow. Lower priority, some people do use operators, mostly to execute -or searches such as: find / (-nouser -or -nogroup) Finally, I thought I'd include a link to the Posix spec for find</description></buginformation><fixedFiles><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.Nogroup.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.Or.java</file><file>gelog.hadoop.hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.Name.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestMaxDepth.java</file><file>gelog.hadoop.hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.And.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.And.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.MaxDepth.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestAnd.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.CommandFactory.java</file><file>gelog.hadoop.hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestFind.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.Group.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.TestCopy.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestUser.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestFilterExpression.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestIname.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.MinDepth.java</file><file>gelog.hadoop.hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.MockFileSystem.java</file><file>gelog.hadoop.hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestIname.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestPrint0.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestDepth.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestSize.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.FindOptions.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestRegexType.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestNot.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.Result.java</file><file>gelog.hadoop.hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.Print.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.Not.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.NumberExpression.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestAmin.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.Find.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.Command.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.Expression.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.TestFind.java</file><file>gelog.hadoop.hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.FindOptions.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.Nouser.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.Newer.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.Debug.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.Type.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestOk.java</file><file>gelog.hadoop.hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.FilterExpression.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestNogroup.java</file><file>gelog.hadoop.hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.Result.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.Prune.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestExec.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestBlocksize.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestPrint.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestPerm.java</file><file>gelog.hadoop.hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestHelper.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.FilterExpression.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestHelper.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestType.java</file><file>gelog.hadoop.hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestPrint0.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.StartTime.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestName.java</file><file>gelog.hadoop.hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestFilterExpression.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.Mtime.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.ClassExpression.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.Exec.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestMmin.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.Find.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.Ctime.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestNewer.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestPrune.java</file><file>gelog.hadoop.hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestResult.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.Perm.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestNumericPrimary.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestIregex.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestNouser.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestExpression.java</file><file>gelog.hadoop.hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestAnd.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.Name.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestMtime.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestClassExpression.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestStartTime.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestEmpty.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.Atime.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.Xdev.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.Replicas.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.Ok.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.MockFileSystem.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.Print.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.Links.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestReplicas.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.FileStatus.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.Empty.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestAtime.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestResult.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.Regex.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.TimeExpression.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestRegex.java</file><file>gelog.hadoop.hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.Expression.java</file><file>gelog.hadoop.hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.ExpressionFactory.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestBaseExpression.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.Size.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestFind.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.BaseExpression.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestOr.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.FsShell.java</file><file>gelog.hadoop.hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.BaseExpression.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestMinDepth.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.Depth.java</file><file>gelog.hadoop.hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestPrint.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.ExpressionFactory.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestNumberExpression.java</file><file>gelog.hadoop.hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestName.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.Blocksize.java</file><file>hadoop-common-project.hadoop-common.src.test.java.org.apache.hadoop.fs.shell.find.TestGroup.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.FsCommand.java</file><file>hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.User.java</file><file>gelog.hadoop.hadoop-common-project.hadoop-common.src.main.java.org.apache.hadoop.fs.shell.find.Find.java</file></fixedFiles></bug></bugrepository>